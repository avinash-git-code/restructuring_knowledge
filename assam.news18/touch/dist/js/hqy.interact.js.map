{"version":3,"sources":["webpack:///webpack/bootstrap 77cbf0dca4a22a2b577d","webpack:///./hqy.interact.main.js","webpack:///./interaction/draggable.js","webpack:///./$.js","webpack:///./utils/utils.js","webpack:///./interaction/draggable-class.js","webpack:///./interaction/events.js","webpack:///./utils/widget.js","webpack:///./interaction/droppable.js","webpack:///./interaction/droppable-class.js","webpack:///./interaction/resizable.js","webpack:///./interaction/resizable-class.js"],"names":[],"mappings":";;;;;;;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;AACA,wB;;;;;;ACFA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,wBAAuB,2CAA2C;;AAElE;AACA;AACA;;AAEA;AACA;;AAEA;AACA,GAAE;AACF;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iCAAgC;AAChC,wCAAuC;AACvC,mCAAkC;AAClC;AACA;;;;;;;AC9CA,gD;;;;;;ACAA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;AC9BA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAE;;AAEF;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA;AACA,KAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA,IAAG;AACH,GAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;AACH,GAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,KAAI;AACJ;AACA;AACA,MAAK;;AAEL;AACA,KAAI;AACJ;AACA;AACA,IAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAE;;AAEF;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;;AAEA;AACA;AACA,IAAG;;;AAGH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL,KAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,KAAI;;AAEJ;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA,IAAG;;AAEH;AACA,GAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA,EAAC;;AAED;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,GAAE;AACF;;;AAGA;AACA;;AAEA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;;;;;;;AC1cA;;AAEA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA,gBAAe;;AAEf;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;;AAEA;AACA;;;;;;;;ACpCA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA,GAAE;;AAEF;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA,2BAA0B;AAC1B,GAAE;;AAEF;AACA,uBAAsB;;AAEtB;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA,GAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAM;AACN,IAAG;AACH;AACA;AACA;;AAEA,8CAA6C,MAAM;AACnD;AACA;AACA;AACA;AACA;;AAEA,uDAAsD,MAAM;AAC5D;AACA;AACA;AACA;AACA;;AAEA,oBAAmB;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,KAAI;AACJ;AACA;;AAEA;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAI;AACJ;;AAEA;AACA,GAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAE;;;AAGF;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,0BAAyB,IAAI,KAAK;AAClC;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,sCAAqC;AACrC;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,qBAAoB,IAAI,IAAI;AAC5B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAE;AACF;;;AAGA;AACA,gCAA+B,QAAQ;AACvC;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;;;;;;;;AClQA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,wBAAuB,2CAA2C;;AAElE;AACA;AACA;;AAEA;AACA;;AAEA;AACA,GAAE;AACF;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,wCAAuC;AACvC,uCAAsC;AACtC,wCAAuC;AACvC;AACA;;;;;;;ACxCA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA,GAAE;;AAEF;AACA;;AAEA,gBAAe,oBAAoB;AACnC;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAC;;AAED;;AAEA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA,GAAE;AACF;;;;;;;AC7CA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,wBAAuB,2CAA2C;;AAElE;AACA;AACA;;AAEA;AACA;;AAEA;AACA,GAAE;AACF;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAgC;AAChC,+BAA8B;AAC9B,0BAAyB;AACzB;AACA;;;;;;;AC3CA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA,IAAG;;AAEH;AACA;;AAEA;AACA;AACA,IAAG;;AAEH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA,eAAc,kBAAkB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;AACH,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,GAAE;;AAEF;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,GAAE;;AAEF;AACA;;AAEA;;AAEA;AACA;AACA,IAAG;;AAEH;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA","file":"hqy.interact.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 77cbf0dca4a22a2b577d\n **/","require('interaction/draggable');\nrequire('interaction/droppable');\nrequire('interaction/resizable');\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./hqy.interact.main.js\n ** module id = 0\n ** module chunks = 0\n **/","var $ = require('../$'),\n\tUtils = require('../utils/utils'),\n\tDraggable = require('./draggable-class');\n\n$.fn.hqyDraggable = function (options) {\n\tvar args = arguments;\n\n\treturn this.each(function () {\n\t\tvar $ele = $(this);\n\t\tvar instance = $ele.data('hqyDraggable');\n\n\t\tif (Utils.isString(options)){\n\t\t\tinstance && instance[options].apply(instance, Array.prototype.slice.call(args, 1));\n\t\t\treturn;\n\t\t}\n\n\t\toptions = $.extend({}, $.fn.hqyDraggable.defaults, options || {});\n\n\t\tif (instance){\n\t\t\tinstance.destroy();\n\t\t}\n\n\t\tinstance = new $.fn.hqyDraggable.clz();\n\t\tinstance.init(this, options);\n\n\t\t$ele.data('hqyDraggable', instance);\n\t});\n};\n\n$.fn.hqyDraggable.clz = Draggable;\n\n$.fn.hqyDraggable.defaults = {\n\tproxy:null,\n\trevert:false,\n\trevertDuration: 0,\n\tdeltaX:null,\n\tdeltaY:null,\n\thandle: null,\n\tdisabled: false,\n\taxis:null,\t// x or y\n\tcursor: 'move',\n\n\tonBeforeDrag: function(event){},\n\tonStartDrag: function(event, target){},\n\tonDrag: function(event, target){},\n\tonStopDrag: function(event, target){}\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./interaction/draggable.js\n ** module id = 1\n ** module chunks = 0\n **/","module.exports = window.jQuery || window.Zepto;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./$.js\n ** module id = 2\n ** module chunks = 0\n **/","var $ = require('../$');\n\nvar toString = exports.toString = Object.prototype.toString;\n\nexports.isUndefined = function(obj) {\n\treturn obj === void 0;\n};\n\nexports.isNull = function(obj) {\n\treturn obj === null;\n};\n\n$.each(['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp', 'Error'], function (index, name) {\n\texports['is' + name] = function (obj) {\n\t\treturn toString.call(obj) === '[object ' + name + ']';\n\t};\n});\n\nfunction S4() {\n\treturn (((1+Math.random())*0x10000)|0).toString(16).substring(1);\n}\n\nexports.uuid = function (prefix) {\n\tvar id = '' + S4() + S4() + S4() + S4() + S4() + S4() + S4() + S4();\n\treturn prefix ? prefix + id : id;\n};\n\nexports.ucfirst = function (str) {\n\tif (!str) return str;\n\treturn str.charAt(0).toUpperCase() + str.substring(1);\n};\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./utils/utils.js\n ** module id = 3\n ** module chunks = 0\n **/","var $ = require('../$'),\n\tEvents = require('./events'),\n\tUtils = require('../utils/utils'),\n\tWidget = require('../utils/widget');\n\nfunction Draggable () {}\n\n$.extend(Draggable.prototype, Widget, {\n\tsetup: function () {\n\t\tthis.bindEvents();\n\t},\n\n\tbindEvents: function () {\n\t\tvar handle = this.get('handle') || this.el;\n\n\t\tif (isString(handle)) {\n\t\t\thandle = this.$(handle);\n\t\t}\n\n\t\tthis.delegateEvents(handle, Events.start, this.doDragBefore);\n\n\t\tthis.delegateEvents('click', function (event) {\n\t\t\tif (!this._allowClick) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tthis._allowClick = true;\n\t\t\t}\n\t\t});\n\t},\n\n\tdrag: function (event) {\n\t\tvar dragData = event.data;\n\t\tvar proxy = this._proxy;\n\t\tvar axis = this.get('axis');\n\t\tvar pointer = Events.pointer(event);\n\t\tvar pageX = pointer.x;\n\t\tvar pageY = pointer.y;\n\n\t\tvar left = dragData.startLeft + pageX - dragData.startX;\n\t\tvar top = dragData.startTop + pageY - dragData.startY;\n\n\t\tvar parent;\n\n\t\t// 只有在 proxy 的情况下才计算 deltaX 和 deltaY\n\t\tif (proxy) {\n\t\t\tvar deltaX = this.get('deltaX');\n\t\t\tvar deltaY = this.get('deltaY');\n\n\t\t\tparent = proxy.parent();\n\n\t\t\tif (parent[0] == document.body){\n\t\t\t\tif (isValid(deltaX)) {\n\t\t\t\t\tleft = pageX + deltaX;\n\t\t\t\t} else {\n\t\t\t\t\tleft = pageX - dragData.offsetWidth;\n\t\t\t\t}\n\n\t\t\t\tif (isValid(deltaY)){\n\t\t\t\t\ttop = pageY + deltaY;\n\t\t\t\t} else {\n\t\t\t\t\ttop = pageY - dragData.offsetHeight;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (isValid(deltaX)) {\n\t\t\t\t\tleft += dragData.offsetWidth + deltaX;\n\t\t\t\t}\n\n\t\t\t\tif (isValid(deltaY)){\n\t\t\t\t\ttop += dragData.offsetHeight + deltaY;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tparent = this.el.parent();\n\t\t}\n\n\t\tif (parent[0] != document.body) {\n\t\t\tleft += parent.scrollLeft();\n\t\t\ttop += parent.scrollTop();\n\t\t}\n\n\n\t\tif (axis == 'x') {\n\t\t\tdragData.left = left;\n\t\t} else if (axis == 'y') {\n\t\t\tdragData.top = top;\n\t\t} else {\n\t\t\tdragData.left = left;\n\t\t\tdragData.top = top;\n\t\t}\n\t},\n\n\tapplyDrag: function (event) {\n\t\t(this._proxy || this.el).css({\n\t\t\tleft: event.data.left,\n\t\t\ttop: event.data.top\n\t\t});\n\t},\n\n\tdoDragBefore: function (event) {\n\t\t// 重置点击事件标志位\n\t\tthis._allowClick = true;\n\n\t\t// 不允许拖放\n\t\tif (event.which === 3 || this.get('disabled') || !canDrag()) {\n\t\t\treturn;\n\t\t}\n\n\n\t\t// 阻止默认事件\n\t\tevent.preventDefault();\n\n\t\tvar position = this.el.position(),\n\t\t\toffset = this.el.offset(),\n\t\t\tpointer = Events.pointer(event);\n\n\t\tevent.data = {\n\t\t\tstartTime: new Date().getTime(), // 开始时间\n\t\t\tstartPosition: this.el.css('position'), // 开始的 position，如 static，relative，方便拖拽结束后还原\n\t\t\tstartLeft: position.left,\n\t\t\tstartTop: position.top,\n\t\t\tleft: position.left,\n\t\t\ttop: position.top,\n\t\t\tstartX: pointer.x,\n\t\t\tstartY: pointer.y,\n\t\t\toffsetWidth: (pointer.x - offset.left),\n\t\t\toffsetHeight: (pointer.y - offset.top)\n\t\t};\n\n\t\t// 触发回调\n\t\tif (this.triggerMethod('onBeforeDrag', event) === false) return;\n\n\t\tvar that = this,\n\t\t\t$doc = $(document),\n\t\t\tnamespace = getEventNamespace(this.cid);\n\n\t\t$doc.on(Events.move + namespace, event.data, function (event) {\n\t\t\tif (!isDragging()) {\n\t\t\t\tthat.doDragStart(event);\n\t\t\t} else {\n\t\t\t\tthat.doDragMove(event);\n\t\t\t}\n\t\t});\n\n\t\t$doc.on(Events.end + namespace, event.data, function (event) {\n\t\t\tthat.doDragEnd(event);\n\t\t});\n\t},\n\n\tdoDragStart: function (event) {\n\t\tif (!this._isMoving) {\n\t\t\t// 阻止默认事件\n\t\t\tevent.preventDefault();\n\n\t\t\tthis._isMoving = true;\n\t\t\treturn;\n\t\t}\n\n\t\t// 设置状态\n\t\ttoggleDragging(true);\n\n\t\tvar that = this;\n\n\t\t// drop 对象\n\t\tthis._drops = $.grep(drops(), function (droppable) {\n\t\t\t// 排除 draggable 元素也是 droppable 元素\n\t\t\tif (that.element === droppable.element) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tvar accept = droppable.get('accept');\n\n\t\t\t// 询问每一个 drop 元素是否接受该拖拽对象\n\t\t\tif (isFunction(accept)) {\n\t\t\t\treturn accept.call(droppable.element, that.element);\n\n\t\t\t// 如果 accept 是选择器\n\t\t\t} else if (accept) {\n\t\t\t\treturn $(accept).filter(function(){\n\t\t\t\t\treturn this === that.element;\n\t\t\t\t}).length > 0;\n\n\t\t\t// 默认接受该拖拽元素\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t});\n\n\t\t// 清理 proxy（上一次 revert 动画还没有执行完成）\n\t\tthis.clearProxy();\n\n\t\t// 创建 proxy\n\t\tvar userProxy = this.get('proxy');\n\n\t\tif (userProxy === 'clone'){\n\t\t\tthis._proxy = this.el.clone().insertAfter(this.el);\n\t\t} else if (isFunction(userProxy)) {\n\t\t\tthis._proxy = userProxy.call(this.element, this.element);\n\t\t}\n\n\t\tvar target = this._proxy || this.el;\n\n\t\t// 设置定位\n\t\ttarget.css('position', 'absolute');\n\n\t\t// 设置拖拽指针样式\n\t\t$('body').css('cursor', this.get('cursor'));\n\n\t\t// 触发回调\n\t\tthis.triggerMethod('onStartDrag', event, target[0]);\n\n\t\t// 设置一次位置\n\t\tthis.doDragMove(event);\n\t},\n\n\tdoDragMove: function (event) {\n\t\tif (!isDragging()) return;\n\n\t\t// 阻止默认事件\n\t\tevent.preventDefault();\n\n\t\t// 处理拖拽数据\n\t\tthis.drag(event);\n\n\t\t// 应用拖拽数据\n\t\tif (this.triggerMethod('onDrag', event, (this._proxy || this.el)[0]) !== false){\n\t\t\tthis.applyDrag(event);\n\t\t}\n\n\t\tvar that = this,\n\t\t\t$body = $('body'),\n\t\t\ttarget = this._proxy || this.el;\n\n\t\t// 触发 droppable 的事件\n\t\tdropsEach(event, this._drops, function (droppable, isContain) {\n\t\t\tvar droppableElement = droppable.element,\n\t\t\t\tcursor = droppable.get('cursor');\n\n\t\t\tif (isContain) {\n\t\t\t\t// 如果未划入 drop 对象，则触发 _dragenter\n\t\t\t\tif (!droppableElement.entered) {\n\t\t\t\t\t$(droppableElement).trigger('_dragenter', [event, target[0]]);\n\t\t\t\t\tdroppableElement.entered = true;\n\t\t\t\t\t// 设置拖拽指针样式\n\t\t\t\t\tcursor && $body.css('cursor', cursor);\n\t\t\t\t}\n\n\t\t\t\t// 同时触发 _dragover\n\t\t\t\t$(droppableElement).trigger('_dragover', [event, target[0]]);\n\t\t\t} else {\n\t\t\t\t// 如果已经划入，再划出，则触发 _dragleave\n\t\t\t\tif (droppableElement.entered){\n\t\t\t\t\t$(droppableElement).trigger('_dragleave', [event, target[0]]);\n\t\t\t\t\tdroppableElement.entered = false;\n\t\t\t\t\t// 设置拖拽指针样式\n\t\t\t\t\t$body.css('cursor', that.get('cursor'));\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\n\tdoDragEnd: function (event) {\n\t\t// 如果没有 drag 则什么都不做，并且清除执行中间数据\n\t\tif (!isDragging()) {\n\t\t\tthis.clearProxy();\n\t\t\tthis.clearDragging();\n\t\t\treturn;\n\t\t}\n\n\t\t// 重置一次位置\n\t\tthis.doDragMove(event);\n\n\t\t// 设置点击事件标志位\n\t\tthis._allowClick = false;\n\n\t\tvar that = this,\n\t\t\trevert = this.get('revert'),\n\t\t\trevertDuration = this.get('revertDuration'),\n\t\t\ttarget = this._proxy || this.el;\n\n\n\t\tdropsEach(event, this._drops, function (droppable, isContain) {\n\t\t\tif (!isContain) return;\n\n\t\t\t$(droppable.element).trigger('_drop', [event, target[0]]);\n\n\t\t\tdroppable.element.entered = false;\n\t\t\treturn false;\n\t\t});\n\n\n\t\tvar reset = function (clearProxy) {\n\t\t\t// 触发 onStopDrag\n\t\t\tthat.triggerMethod('onStopDrag', event, target[0]);\n\n\t\t\tthat.clearDragging();\n\n\t\t\t// 清除代理\n\t\t\tclearProxy && that.clearProxy();\n\t\t}\n\n\t\tvar doProxy = function () {\n\t\t\tif (revert) {\n\t\t\t\tvar left, top;\n\t\t\t\tif (target.parent()[0] == document.body){\n\t\t\t\t\tleft = event.data.startX - event.data.offsetWidth;\n\t\t\t\t\ttop = event.data.startY - event.data.offsetHeight;\n\t\t\t\t} else {\n\t\t\t\t\tleft = event.data.startLeft;\n\t\t\t\t\ttop = event.data.startTop;\n\t\t\t\t}\n\n\t\t\t\t// 这里不能清空代理元素，有可能在执行动画\n\t\t\t\treset();\n\n\t\t\t\trevertElement(target, {\n\t\t\t\t\tleft: left,\n\t\t\t\t\ttop: top\n\t\t\t\t}, revertDuration, function () {\n\t\t\t\t\t// 清除代理\n\t\t\t\t\tthat.clearProxy();\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// 触发回调\n\t\t\t\treset(true);\n\t\t\t}\n\t\t}\n\n\t\tvar doEl = function () {\n\t\t\tif (revert) {\n\t\t\t\trevertElement(target, {\n\t\t\t\t\tleft: event.data.startLeft,\n\t\t\t\t\ttop: event.data.startTop\n\t\t\t\t}, revertDuration, function () {\n\t\t\t\t\t// 充值为初始 position\n\t\t\t\t\ttarget.css('position', event.data.startPosition);\n\t\t\t\t});\n\t\t\t}\n\t\t\t/* else {\n\t\t\t\ttarget.css({\n\t\t\t\t\tleft: event.data.startLeft,\n\t\t\t\t\ttop: event.data.startTop,\n\t\t\t\t\tposition: event.data.startPosition\n\t\t\t\t});\n\t\t\t}*/\n\n\t\t\t// 触发回调\n\t\t\treset(true);\n\t\t}\n\n\t\tif (this._proxy) {\n\t\t\tdoProxy(target);\n\t\t} else {\n\t\t\tdoEl(target);\n\t\t}\n\t},\n\n\tclearProxy: function () {\n\t\tif (this._proxy) {\n\t\t\tthis._proxy.stop(true).remove();\n\t\t\tthis._proxy = null;\n\t\t}\n\t},\n\n\tclearDragging: function () {\n\t\tthis._drops = null;\n\n\t\tthis._isMoving = false;\n\n\t\t$(document).off(getEventNamespace(this.cid));\n\n\t\tsetTimeout(function(){\n\t\t\t$('body').css('cursor','');\n\t\t},100);\n\n\t\ttoggleDragging(false);\n\t},\n\n\tdestroy: function () {\n\t\t// 清除拖拽事件产生的临时变量\n\t\tthis.clearDragging();\n\n\t\tWidget.destroy.call(this);\n\t}\n});\n\nmodule.exports = Draggable;\n\n\n// helpers\n// ----------------\n\nvar isString = Utils.isString,\n\tisFunction = Utils.isFunction,\n\tisUndefined = Utils.isUndefined,\n\tisNull = Utils.isNull;\n\nfunction getEventNamespace (cid) {\n\treturn '.hqyDraggable' + cid;\n}\n\nfunction canDrag () {\n\tif ($.fn.hqyDraggable.isDragging) return false;\n\n\tif ($.fn.hqyResizable && ($.fn.hqyResizable.isResizing || $.fn.hqyResizable.inHotzone)) {\n\t\treturn false;\n\t}\n\n\treturn true;\n}\n\nfunction toggleDragging (state) {\n\t$.fn.hqyDraggable.isDragging = state;\n}\n\nfunction isDragging () {\n\treturn $.fn.hqyDraggable.isDragging;\n}\n\nfunction drops () {\n\treturn ($.fn.hqyDroppable && $.fn.hqyDroppable.instances) || [];\n}\n\nfunction isValid (val) {\n\treturn !isUndefined(val) && !isNull(val);\n}\n\nfunction dropsEach (event, drops, cb) {\n\tvar pointer = Events.pointer(event);\n\n\tvar pageX = pointer.x;\n\tvar pageY = pointer.y;\n\n\t$.each(drops, function (index, droppable) {\n\t\tif (droppable.get('disabled')) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar p2 = droppable.el.offset();\n\n\t\tvar isContain = pageX > p2.left &&\n\t\t\t\t\t\tpageX < p2.left + droppable.el.outerWidth() &&\n\t\t\t\t\t\tpageY > p2.top &&\n\t\t\t\t\t\tpageY < p2.top + droppable.el.outerHeight();\n\n\t\treturn cb.call(droppable.element, droppable, isContain);\n\t});\n}\n\n\nfunction revertElement (target, animateTo, duration, cb) {\n\tcb = cb || $.noop();\n\n\tif (duration > 0) {\n\t\ttarget.animate(animateTo, duration, cb);\n\t} else {\n\t\ttarget.css(animateTo);\n\t\tcb();\n\t}\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./interaction/draggable-class.js\n ** module id = 4\n ** module chunks = 0\n **/","var touch = !!(('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch);\n\nif (touch) {\n\texports.start = 'touchstart';\n\texports.move = 'touchmove';\n\texports.end = 'touchend';\n} else {\n\tvar navigator = window.navigator;\n\tvar desktopEvents = ['mousedown', 'mousemove', 'mouseup'];\n\tif (navigator.pointerEnabled) desktopEvents = ['pointerdown', 'pointermove', 'pointerup'];\n\telse if (navigator.msPointerEnabled) desktopEvents = ['MSPointerDown', 'MSPointerMove', 'MSPointerUp'];\n\n\texports.start = desktopEvents[0];\n\texports.move = desktopEvents[1];\n\texports.end = desktopEvents[2];\n}\n\n\nexports.pointer = function (event) {\n\tvar result = { x: null, y: null };\n\n\tevent = event.originalEvent || event || window.event;\n\n\tevent = event.touches && event.touches.length ?\n\t\t\tevent.touches[0] : event.changedTouches && event.changedTouches.length ?\n\t\t\t\tevent.changedTouches[0] : event;\n\n\tif (event.pageX) {\n\t\tresult.x = event.pageX;\n\t\tresult.y = event.pageY;\n\t} else {\n\t\tresult.x = event.clientX;\n\t\tresult.y = event.clientY;\n\t}\n\n\treturn result;\n};\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./interaction/events.js\n ** module id = 5\n ** module chunks = 0\n **/","var $ = require('../$'),\n\tUtils = require('./utils');\n\nvar DELEGATE_EVENT_NS = '.delegate-events-';\n\nmodule.exports = {\n\t// 初始化\n\tinit: function (element, options) {\n\t\tthis.initCid();\n\n\t\tthis.initOptions(options);\n\n\t\tthis.initElement(element);\n\n\t\tthis.setup();\n\t},\n\n\t// 初始化 ID\n\tinitCid: function () {\n\t\tthis.cid = uuid();\n\t},\n\n\t// 初始化 dom 对象\n\tinitElement: function (element) {\n\t\tthis.originalElement = element;\n\t\tthis.element = $(element)[0];\n\t\tif (!this.element) {\n\t\t\tthrow new Error('element is invalid');\n\t\t}\n\t\tthis.el = $(this.element);\n\t},\n\n\t// 初始化 参数\n\tinitOptions: function (options) {\n\t\tthis.originalAttrs = options;\n\t\tthis.attrs = $.extend({}, this.originalAttrs);\n\t},\n\n\t// 提供子类覆盖\n\tsetup: function () {},\n\n\t// 获取属性\n\tget: function (key) {\n\t\treturn this.attrs[key];\n\t},\n\n\t// 设置属性\n\tset: function (key, val) {\n\t\tif (key) {\n\t\t\tthis.attrs[key] = val;\n\t\t}\n\t},\n\n\t// 在 this.el 内寻找匹配节点\n\t$: function(selector) {\n\t\treturn this.el.find(selector);\n\t},\n\n\ttriggerMethod: function (name) {\n\t\tvar cb = this.get(name);\n\n\t\tif (isFunction(cb)) {\n\t\t\treturn cb.apply(this.element, Array.prototype.slice.call(arguments, 1));\n\t\t}\n\t},\n\n\t// 注册事件代理\n\tdelegateEvents: function(element, events, handler) {\n\t\tvar argus = trimRightUndefine(Array.prototype.slice.call(arguments));\n\n\t\t// delegateEvents()\n\t\tif (argus.length === 0) {\n\t\t\treturn this;\n\n\t\t// delegateEvents({\n\t\t//   'click p': 'fn1',\n\t\t//   'click li': 'fn2'\n\t\t// })\n\t\t} else if (argus.length === 1) {\n\t\t\tevents = element;\n      \t\telement = this.el;\n\t\t}\n\n\t\t// delegateEvents('click p', function(ev) { ... })\n\t\telse if (argus.length === 2) {\n\t\t\thandler = events;\n\t\t\tevents = element;\n\t\t\telement = this.el;\n\t\t}\n\n\t\t// delegateEvents(element, 'click p', function(ev) { ... })\n\t\telse {\n\t\t\telement || (element = this.el)\n\t\t\tthis._delegateElements || (this._delegateElements = [])\n\t\t\tthis._delegateElements.push($(element))\n\t\t}\n\n\t\t// 'click p' => {'click p': handler}\n\t\tif (isString(events) && isFunction(handler)) {\n\t\t\tvar o = {};\n\t\t\to[events] = handler;\n\t\t\tevents = o;\n\t\t}\n\n\t\t// key 为 'event selector'\n\t\tfor (var key in events) {\n\t\t\tif (!events.hasOwnProperty(key)) continue;\n\n\t\t\tvar args = parseEventKey(key, this);\n\t\t\tvar eventType = args.type;\n\t\t\tvar selector = args.selector;\n\n\t\t\t;(function(handler, widget) {\n\t\t\t\tvar callback = function(ev) {\n\t\t\t\t\tvar args = Array.prototype.slice.call(arguments);\n\n\t\t\t\t\tif (isFunction(handler)) {\n\t\t\t\t\t\treturn handler.apply(widget, args);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn widget[handler].apply(widget, args);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// delegate\n\t\t\t\tif (selector) {\n\t\t\t\t\t$(element).on(eventType, selector, callback);\n\t\t\t\t}\n\t\t\t\t// normal bind\n\t\t\t\t// 分开写是为了兼容 zepto，zepto 的判断不如 jquery 强劲有力\n\t\t\t\telse {\n\t\t\t\t\t$(element).on(eventType, callback);\n\t\t\t\t}\n\n\t\t\t})(events[key], this);\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t// 卸载事件代理\n\tunDelegateEvents: function(element, eventKey) {\n\t\tvar argus = trimRightUndefine(Array.prototype.slice.call(arguments));\n\n\t\tif (!eventKey) {\n\t\t\teventKey = element;\n\t\t\telement = null;\n\t\t}\n\n\t\t// 卸载所有\n\t\t// .undelegateEvents()\n\t\tif (argus.length === 0) {\n\t\t\tvar type = DELEGATE_EVENT_NS + this.cid;\n\n\t\t\tthis.el && this.el.off(type);\n\n\t\t\t// 卸载所有外部传入的 element\n\t\t\tif (this._delegateElements) {\n\t\t\t\tfor (var de in this._delegateElements) {\n\t\t\t\t\tif (!this._delegateElements.hasOwnProperty(de)) continue;\n\t\t\t\t\tthis._delegateElements[de].off(type);\n\t\t\t\t}\n\t\t\t}\n\n\t\t} else {\n\t\t\tvar args = parseEventKey(eventKey, this);\n\n\t\t\t// 卸载 this.el\n\t\t\t// .undelegateEvents(events)\n\t\t\tif (!element) {\n\t\t\t\tthis.el && this.el.off(args.type, args.selector);\n\t\t\t}\n\n\t\t\t// 卸载外部 element\n\t\t\t// .undelegateEvents(element, events)\n\t\t\telse {\n\t\t\t\t$(element).off(args.type, args.selector);\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\n\tdestroy: function () {\n\t\tthis.unDelegateEvents();\n\n\t\tfor (var p in this) {\n\t\t\tif (this.hasOwnProperty(p)) {\n\t\t\t\tdelete this[p];\n\t\t\t}\n\t\t}\n\n\t\tthis.destroy = function() {};\n\t}\n};\n\n// Helpers\n// ------\nvar uuid = Utils.uuid,\n\tisString = Utils.isString,\n\tisFunction = Utils.isFunction;\n\nvar EVENT_KEY_SPLITTER = /^(\\S+)\\s*(.*)$/;\nvar EXPRESSION_FLAG = /{{([^}]+)}}/g;\nvar INVALID_SELECTOR = 'INVALID_SELECTOR';\n\nfunction parseEventKey(eventKey, widget) {\n\tvar match = eventKey.match(EVENT_KEY_SPLITTER);\n\tvar eventType = match[1] + DELEGATE_EVENT_NS + widget.cid;\n\n\t// 当没有 selector 时，需要设置为 undefined，以使得 zepto 能正确转换为 bind\n\tvar selector = match[2] || undefined;\n\n\tif (selector && selector.indexOf('{{') > -1) {\n\t\tselector = parseExpressionInEventKey(selector, widget);\n\t}\n\n\treturn {\n\t\ttype: eventType,\n\t\tselector: selector\n\t};\n}\n\n// 解析 eventKey 中的 {{xx}}, {{yy}}\nfunction parseExpressionInEventKey(selector, widget) {\n\n\treturn selector.replace(EXPRESSION_FLAG, function(m, name) {\n\t\tvar parts = name.split('.');\n\t\tvar point = widget, part;\n\n\t\twhile (part = parts.shift()) {\n\t\t\tif (point === widget.attrs) {\n\t\t\t\tpoint = widget.get(part);\n\t\t\t} else {\n\t\t\t\tpoint = point[part];\n\t\t\t}\n\t\t}\n\n\t\t// 已经是 className，比如来自 dataset 的\n\t\tif (isString(point)) {\n\t\t\treturn point;\n\t\t}\n\n\t\t// 不能识别的，返回无效标识\n\t\treturn INVALID_SELECTOR;\n\t});\n}\n\n\nfunction trimRightUndefine(argus) {\n\tfor (var i = argus.length - 1; i >= 0; i--) {\n\t\tif (argus[i] === undefined) {\n\t\t\targus.pop();\n\t\t} else {\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn argus;\n}\n\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./utils/widget.js\n ** module id = 6\n ** module chunks = 0\n **/","var $ = require('../$'),\n\tUtils = require('../utils/utils'),\n\tDroppable = require('./droppable-class');\n\n$.fn.hqyDroppable = function (options) {\n\tvar args = arguments;\n\n\treturn this.each(function () {\n\t\tvar $ele = $(this);\n\t\tvar instance = $ele.data('hqyDroppable');\n\n\t\tif (Utils.isString(options)){\n\t\t\tinstance && instance[options].apply(instance, Array.prototype.slice.call(args, 1));\n\t\t\treturn;\n\t\t}\n\n\t\toptions = $.extend({}, $.fn.hqyDroppable.defaults, options || {});\n\n\t\tif (instance){\n\t\t\tinstance.destroy();\n\t\t}\n\n\t\tinstance = new $.fn.hqyDroppable.clz();\n\t\tinstance.init(this, options);\n\n\t\t$ele.data('hqyDroppable', instance);\n\t});\n};\n\n$.fn.hqyDroppable.clz = Droppable;\n$.fn.hqyDroppable.instances = Droppable.instances;\n\n$.fn.hqyDroppable.defaults = {\n\taccept: null,\n\tdisabled: false,\n\tcursor: 'copy',\n\tonDragEnter: function(event, source){},\n\tonDragOver: function(event, source){},\n\tonDragLeave: function(event, source){},\n\tonDrop: function(event, source){}\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./interaction/droppable.js\n ** module id = 7\n ** module chunks = 0\n **/","var $ = require('../$'),\n\tWidget = require('../utils/widget');\n\nfunction Droppable () {}\n\n$.extend(Droppable.prototype, Widget, {\n\tsetup: function () {\n\t\tdelegate(this, '_dragenter', 'onDragEnter');\n\n\t\tdelegate(this, '_dragleave', 'onDragLeave');\n\n\t\tdelegate(this, '_dragover', 'onDragOver');\n\n\t\tdelegate(this, '_drop', 'onDrop');\n\n\t\tthis.el.attr('hqy-droppable-element', 'active');\n\n\t\tinstances.push(this);\n\t},\n\n\tdestroy: function () {\n\t\tthis.el.removeAttr('hqy-droppable-element');\n\n\t\tfor (var i=0; i<instances.length; i++) {\n\t\t\tif (this === instances[i]) {\n\t\t\t\tinstances.splice(i--, 1);\n\t\t\t}\n\t\t}\n\n\t\tWidget.destroy.call(this);\n\t}\n});\n\nmodule.exports = Droppable;\n\nvar instances = Droppable.instances = [];\n\n\n// helpers\n// ----------------\n\nfunction delegate (instance, type, method) {\n\tinstance.delegateEvents(type, function (event, dragEvent, dragElement) {\n\t\tthis.triggerMethod(method, dragEvent, dragElement);\n\t});\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./interaction/droppable-class.js\n ** module id = 8\n ** module chunks = 0\n **/","var $ = require('../$'),\n\tUtils = require('../utils/utils'),\n\tResizable = require('./resizable-class');\n\n$.fn.hqyResizable = function (options) {\n\tvar args = arguments;\n\n\treturn this.each(function () {\n\t\tvar $ele = $(this);\n\t\tvar instance = $ele.data('hqyResizable');\n\n\t\tif (Utils.isString(options)){\n\t\t\tinstance && instance[options].apply(instance, Array.prototype.slice.call(args, 1));\n\t\t\treturn;\n\t\t}\n\n\t\toptions = $.extend({}, $.fn.hqyResizable.defaults, options || {});\n\n\t\tif (instance){\n\t\t\tinstance.destroy();\n\t\t}\n\n\t\tinstance = new $.fn.hqyResizable.clz();\n\t\tinstance.init(this, options);\n\n\t\t$ele.data('hqyResizable', instance);\n\t});\n};\n\n$.fn.hqyResizable.clz = Resizable;\n\n$.fn.hqyResizable.defaults = {\n\tdisabled: false,\n\thandles:'n, e, s, w, ne, se, sw, nw, all',\n\tminWidth: 10,\n\tminHeight: 10,\n\tmaxWidth: 10000,\n\tmaxHeight: 10000,\n\tedge:5,\n\tonBeforeResize: function (e) {},\n\tonStartResize: function(e) {},\n\tonResize: function(e) {},\n\tonStopResize: function(e) {}\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./interaction/resizable.js\n ** module id = 9\n ** module chunks = 0\n **/","var $ = require('../$'),\n\tEvents = require('./events'),\n\tWidget = require('../utils/widget');\n\nfunction Resizable () {}\n\n$.extend(Resizable.prototype, Widget, {\n\tsetup: function () {\n\t\tthis.bindEvents();\n\t},\n\n\tbindEvents: function () {\n\t\tthis.delegateEvents('mousemove', function (event) {\n\t\t\tif (this.get('disabled')) return;\n\n\t\t\tvar dir = this.getDirection(Events.pointer(event));\n\n\t\t\tif (dir) {\n\t\t\t\tthis.el.css('cursor', dir + '-resize');\n\t\t\t\ttoggleInHotzone(true);\n\t\t\t} else {\n\t\t\t\tthis.el.css('cursor', '');\n\t\t\t\ttoggleInHotzone(false);\n\t\t\t}\n\t\t});\n\n\t\tthis.delegateEvents('mouseleave', function (event) {\n\t\t\tif (this.get('disabled')) return;\n\n\t\t\tthis.el.css('cursor', '');\n\t\t\ttoggleInHotzone(false);\n\t\t});\n\n\t\tthis.delegateEvents(Events.start, this.doResizeBefore);\n\n\t\tthis.delegateEvents('click', function (event) {\n\t\t\tif (!this._allowClick) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tthis._allowClick = true;\n\t\t\t}\n\t\t});\n\t},\n\n\tgetDirection: function (pointer) {\n\t\tvar offset = this.el.offset(),\n\t\t\twidth = this.el.outerWidth(),\n\t\t\theight = this.el.outerHeight(),\n\t\t\tedge = this.get('edge'),\n\t\t\tpageX = pointer.x,\n\t\t\tpageY = pointer.y,\n\t\t\tdir = '';\n\n\t\tif (pageY > offset.top && pageY < offset.top + edge) {\n\t\t\tdir += 'n';\n\t\t} else if (pageY < offset.top + height && pageY > offset.top + height - edge) {\n\t\t\tdir += 's';\n\t\t}\n\t\tif (pageX > offset.left && pageX < offset.left + edge) {\n\t\t\tdir += 'w';\n\t\t} else if (pageX < offset.left + width && pageX > offset.left + width - edge) {\n\t\t\tdir += 'e';\n\t\t}\n\n\t\tvar handles = this.get('handles').split(',');\n\t\tfor(var i=0; i<handles.length; i++) {\n\t\t\tvar handle = handles[i].replace(/(^\\s*)|(\\s*$)/g, '');\n\t\t\tif (handle == 'all' || handle == dir) {\n\t\t\t\treturn dir;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\n\tdoResizeBefore: function (event) {\n\t\t// 重置点击事件标志位\n\t\tthis._allowClick = true;\n\n\t\t// 不允许缩放\n\t\tif (event.which === 3 || this.get('disabled') || !canResize()) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar pointer = Events.pointer(event);\n\n\t\t// 获取缩放的方向\n\t\tvar dir = this.getDirection(pointer);\n\t\tif (!dir) return;\n\n\t\t// 阻止默认事件\n\t\tevent.preventDefault();\n\n\t\t// 撤销 hotzone 状态\n\t\ttoggleInHotzone(false);\n\n\t\t// 封装缩放数据\n\t\tvar outerWidth = this.el.outerWidth();\n\t\tvar outerHeight = this.el.outerHeight();\n\t\tvar width = this.el.width();\n\t\tvar height = this.el.height();\n\n\t\tevent.data = {\n\t\t\tdir: dir,\n\t\t\tstartLeft: getCssValue(this.el, 'left'),\n\t\t\tstartTop: getCssValue(this.el, 'top'),\n\t\t\tleft: getCssValue(this.el, 'left'),\n\t\t\ttop: getCssValue(this.el, 'top'),\n\t\t\tstartX: pointer.x,\n\t\t\tstartY: pointer.y,\n\t\t\tstartWidth: outerWidth,\n\t\t\tstartHeight: outerHeight,\n\t\t\twidth: outerWidth,\n\t\t\theight: outerHeight,\n\t\t\tdeltaWidth: outerWidth - width,\n\t\t\tdeltaHeight: outerHeight - height\n\t\t};\n\n\t\tif (this.triggerMethod('onBeforeResize', event) === false) return;\n\n\t\tvar that = this,\n\t\t\t$doc = $(document),\n\t\t\tnamespace = getEventNamespace(this.cid);\n\n\t\t$doc.on(Events.move + namespace, event.data, function (event) {\n\t\t\tif (!isResizing()) {\n\t\t\t\tthat.doResizeStart(event);\n\t\t\t} else {\n\t\t\t\tthat.doResizeMove(event);\n\t\t\t}\n\t\t});\n\n\t\t$doc.on(Events.end + namespace, event.data, function (event) {\n\t\t\tthat.doResizeEnd(event);\n\t\t});\n\t},\n\n\tresize: function (event) {\n\t\tvar resizeData = event.data;\n\t\tvar dir = resizeData.dir;\n\t\tvar pointer = Events.pointer(event);\n\t\tvar pageX = pointer.x;\n\t\tvar pageY = pointer.y;\n\t\tvar width = 0;\n\t\tvar height = 0;\n\n\t\tif (dir.indexOf('e') != -1) {\n\t\t\twidth = resizeData.startWidth + pageX - resizeData.startX;\n\t\t\twidth = Math.min(\n\t\t\t\t\t\tMath.max(width, this.get('minWidth')),\n\t\t\t\t\t\tthis.get('maxWidth')\n\t\t\t\t\t);\n\t\t\tresizeData.width = width;\n\t\t}\n\t\tif (dir.indexOf('s') != -1) {\n\t\t\theight = resizeData.startHeight + pageY - resizeData.startY;\n\t\t\theight = Math.min(\n\t\t\t\t\tMath.max(height, this.get('minHeight')),\n\t\t\t\t\tthis.get('maxHeight')\n\t\t\t);\n\t\t\tresizeData.height = height;\n\t\t}\n\t\tif (dir.indexOf('w') != -1) {\n\t\t\twidth = resizeData.startWidth - pageX + resizeData.startX;\n\t\t\twidth = Math.min(\n\t\t\t\t\t\tMath.max(width, this.get('minWidth')),\n\t\t\t\t\t\tthis.get('maxWidth')\n\t\t\t\t\t);\n\t\t\tresizeData.width = width;\n\t\t\tresizeData.left = resizeData.startLeft + resizeData.startWidth - resizeData.width;\n\t\t}\n\t\tif (dir.indexOf('n') != -1) {\n\t\t\theight = resizeData.startHeight - pageY + resizeData.startY;\n\t\t\theight = Math.min(\n\t\t\t\t\t\tMath.max(height, this.get('minHeight')),\n\t\t\t\t\t\tthis.get('maxHeight')\n\t\t\t\t\t);\n\t\t\tresizeData.height = height;\n\t\t\tresizeData.top = resizeData.startTop + resizeData.startHeight - resizeData.height;\n\t\t}\n\t},\n\n\tapplySize: function (event) {\n\t\tvar resizeData = event.data;\n\n\t\tthis.el.css({\n\t\t\tleft: resizeData.left,\n\t\t\ttop: resizeData.top\n\t\t});\n\n\t\tif (this.el.outerWidth() != resizeData.width) {\n\t\t\tthis.el.width(resizeData.width - resizeData.deltaWidth);\n\t\t}\n\n\t\tif (this.el.outerHeight() != resizeData.height) {\n\t\t\tthis.el.height(resizeData.height - resizeData.deltaHeight);\n\t\t}\n\t},\n\n\tdoResizeStart: function (event) {\n\t\tif (!this._isMoving) {\n\t\t\t// 阻止默认事件\n\t\t\tevent.preventDefault();\n\n\t\t\tthis._isMoving = true;\n\t\t\treturn;\n\t\t}\n\n\t\t// 设置状态\n\t\ttoggleResizing(true);\n\n\t\t$('body').css('cursor', event.data.dir+'-resize');\n\n\t\t// 触发回调\n\t\tthis.triggerMethod('onStartDrag', event);\n\n\t\t// 设置一次缩放\n\t\tthis.doResizeMove(event);\n\t},\n\n\tdoResizeMove: function (event) {\n\t\tif (!isResizing()) return;\n\n\t\t// 阻止默认事件\n\t\tevent.preventDefault();\n\n\t\t// 处理缩放数据\n\t\tthis.resize(event);\n\n\t\t// 处理缩放数据\n\t\tif (this.triggerMethod('onResize', event) !== false) {\n\t\t\tthis.applySize(event);\n\t\t}\n\t},\n\n\tdoResizeEnd: function (event) {\n\t\tif (!isResizing()) {\n\t\t\tthis.clearResizing();\n\t\t\treturn;\n\t\t}\n\n\t\t// 重置一次缩放\n\t\tthis.doResizeMove(event);\n\n\t\t// 设置点击事件标志位\n\t\tthis._allowClick = false;\n\n\t\t// 触发回调\n\t\tthis.triggerMethod('onStopResize', event);\n\n\t\tthis.clearResizing();\n\n\t\t$('body').css('cursor','');\n\t},\n\n\tclearResizing: function () {\n\t\tthis._isMoving = false;\n\n\t\t$(document).off(getEventNamespace(this.cid));\n\n\t\tsetTimeout(function(){\n\t\t\t$('body').css('cursor','');\n\t\t},100);\n\n\t\ttoggleResizing(false);\n\t\ttoggleInHotzone(false);\n\t},\n\n\tdestroy: function () {\n\t\t// 清除缩放事件产生的临时变量\n\t\tthis.clearResizing();\n\t\tWidget.destroy.call(this);\n\t}\n});\n\nmodule.exports = Resizable;\n\n// helpers\n// ----------------\n\nfunction getEventNamespace (cid) {\n\treturn '.hqyResizable' + cid;\n}\n\nfunction canResize () {\n\tif ($.fn.hqyResizable.isResizing) return false;\n\n\tif ($.fn.hqyDraggable && $.fn.hqyDraggable.isDragging) {\n\t\treturn false;\n\t}\n\n\treturn true;\n}\n\nfunction toggleResizing (state) {\n\t$.fn.hqyResizable.isResizing = state;\n}\n\nfunction toggleInHotzone (state) {\n\t$.fn.hqyResizable.inHotzone = state;\n}\n\nfunction isResizing () {\n\treturn $.fn.hqyResizable.isResizing;\n}\n\nfunction getCssValue(el, css) {\n\tvar val = parseInt(el.css(css));\n\tif (isNaN(val)) {\n\t\treturn 0;\n\t} else {\n\t\treturn val;\n\t}\n}\n\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./interaction/resizable-class.js\n ** module id = 10\n ** module chunks = 0\n **/"],"sourceRoot":""}